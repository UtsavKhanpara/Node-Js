<%- include('header') %>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />

  <div class="container">
    <div class="page-inner">
      <div class="page-header">
        <h3 class="fw-bold mb-3">Tables</h3>
        <ul class="breadcrumbs mb-3">
          <li class="nav-home">
            <a href="#">
              <i class="icon-home"></i>
            </a>
          </li>
          <li class="separator">
            <i class="icon-arrow-right"></i>
          </li>
          <li class="nav-item">
            <a href="#">Tables</a>
          </li>
          <li class="separator">
            <i class="icon-arrow-right"></i>
          </li>
          <li class="nav-item">
            <a href="#">Basic Tables</a>
          </li>
        </ul>
      </div>
      <div class="row">
        <div class="col-md-10">
          <div class="card">
            <div class="card-header">
              <form>
                <input type="text" placeholder="Search Here" name="search"
                  style="padding: 10px; width: 50%;">&nbsp;&nbsp;<input type="submit">
              </form>
              <div class="card-title">Hoverable Table</div>
            </div>
            <div class="card-body">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Profile</th>
                    <th scope="col">Name</th>
                    <th scope="col">Country</th>
                    <th scope="col">Action</th>

                  </tr>
                </thead>
                <tbody>
                  <% alladmin.map((val,index)=>{ %>
                    <tr>
                      <td>
                        <%= ++index%>
                      </td>
                      <td><img src="<%= val.profile %>" style="height: 50px; width: 50px; border-radius: 50%;" alt="">
                      </td>
                      <td>
                        <%= val.name%>
                      </td>
                      <td>
                        <%= val.country%>
                      </td>
                      <td>
                        <a href="/admin/deleteadmin/<%= val.id%>">🗑️</a>
                        <a href="/admin/editadmin/<%= val.id%>">✏️</a>
                       <a href="#ex1" rel="mo dal:open" onclick="return singleAdmin('<%= val.id%>')" class="text-info">👁️👁️</a>
                      </td>
                    </tr>
                    <% }) %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Modal HTML embedded directly into document -->
 <div id="ex1" class="modal">
  <h4>Admin Details</h4>
  <p><b>Name:</b> <span id="adminfullname"></span></p>
  <p><strong>Gender:</strong> <span id="adminGender"></span></p>
  <p><strong>Country:</strong> <span id="adminCountry"></span></p>
  <p><strong>Skilss:</strong> <span id="adminskills"></span></p>
  <a href="#" rel="modal:close">Close</a>
</div>

  <!-- Link to open the modal -->
  </div>
 
  <%- include('footer') %>
    <script>
      function singleAdmin(id) {
        $.ajax({
          url: `/admin/singleAdmin/` + id,
          type: "POST",
          success: function (res) {
            if(res.status === "success"){
              const data=res.data;
             $(`#adminfullname`).html(data.name)
             $(`#adminGender`).html(data.gender)
             $(`#adminCountry`).html(data.country)
             $(`#adminskills`).html(data.skills.join(","))
            }
            else{
               return res.redirect("/admin/addAdmin")
            }
          }
        })
      }
    </script>